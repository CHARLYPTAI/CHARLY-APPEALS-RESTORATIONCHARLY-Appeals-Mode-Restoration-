{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CHARLY Ingestion Input",
  "type": "object",
  "required": ["appeal_id", "property_details", "financials"],
  "properties": {
    "appeal_id": {
      "type": "string",
      "description": "Unique identifier for the appeal case"
    },
    "property_details": {
      "type": "object",
      "required": ["address", "owner", "parcel_number", "property_type"],
      "properties": {
        "address": { "type": "string" },
        "owner": { 
          "type": "string",
          "description": "Name of the property owner",
          "metadata": {
            "is_sensitive": true
          }
        },
        "parcel_number": { "type": "string" },
        "property_type": {
          "type": "string",
          "enum": ["retail", "industrial", "office", "multifamily", "hospitality", "other"],
          "description": "Type of commercial property"
        }
      }
    },
    "financials": {
      "type": "object",
      "required": ["gross_income", "expenses", "net_operating_income"],
      "properties": {
        "gross_income": { 
          "type": "number",
          "metadata": { "is_sensitive": true }
        },
        "expenses": { 
          "type": "number",
          "metadata": { "is_sensitive": true }
        },
        "net_operating_income": { "type": "number" }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "ingestion_timestamp": { "type": "string", "format": "date-time" },
        "source_filename": { "type": "string" },
        "is_encrypted": { "type": "boolean", "default": false },
        "requires_redaction": { "type": "boolean", "default": false }
      }
    }
  }
}
